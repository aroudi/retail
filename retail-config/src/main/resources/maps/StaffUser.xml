<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="au.gov.nsw.railcorp.cimg.dao.StaffUserDao">
    <!-- result maps -->
    <resultMap id="staffUserMap" type="StaffUser" >
        <id column="USER_ID" property="userId" />
        <result column="USERNAME" property="userName" />
        <result column="PASSWORD" property="password" />
        <result column="FIRST_NAME" property="firstName" />
        <result column="SURNAME" property="sureName" />
        <result column="STATUS" property="status" />
        <result column="PRIVILEGE_LEVEL" property="level" />
        <result column="DELETED" property="deleted" />
    </resultMap>
    <select id="doLogin" resultMap="staffUserMap" >
        SELECT
            USER_ID,
            USERNAME,
            PASSWORD,
            FIRST_NAME,
            SURNAME,
            STATUS,
            PRIVILEGE_LEVEL,
            DELETED
        FROM
          STAFF_USER
        WHERE
          USERNAME = #{param1} and DELETED !=1
    </select>
    <select id="doFullLogin" resultMap="staffUserMap" >
        SELECT
        USER_ID,
        USERNAME,
        PASSWORD,
        FIRST_NAME,
        SURNAME,
        STATUS,
        PRIVILEGE_LEVEL,
        DELETED
        FROM
        STAFF_USER
        WHERE
        USERNAME = #{param1} and password = #{param2} and DELETED !=1
    </select>
    <select id="getUserById" resultMap="staffUserMap" >
        SELECT
        USER_ID,
        USERNAME,
        PASSWORD,
        FIRST_NAME,
        SURNAME,
        STATUS,
        PRIVILEGE_LEVEL,
        DELETED
        FROM
        STAFF_USER
        WHERE
            USER_ID=#{value}
    </select>

    <select id="getAllUsers" resultMap="staffUserMap" >
        SELECT
        USER_ID,
        USERNAME,
        PASSWORD,
        FIRST_NAME,
        SURNAME,
        STATUS,
        PRIVILEGE_LEVEL,
        DELETED
        FROM
        STAFF_USER
        WHERE
        DELETED !=1
        ORDER BY first_name, surname
    </select>
</mapper>